if (self.CavalryLogger) { CavalryLogger.start_js(["YBvxi"]); }

__d("MessengerMaybeCreateCallConferenceForP2PMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"MessengerMaybeCreateCallConferenceForP2pResponsePayload",kind:"LinkedField",name:"messenger_maybe_create_call_conference_for_p2p",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"conference_name",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MessengerMaybeCreateCallConferenceForP2PMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MessengerMaybeCreateCallConferenceForP2PMutation",selections:b},params:{id:"2543337932369844",metadata:{},name:"MessengerMaybeCreateCallConferenceForP2PMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("MessengerPrefixConferenceNameMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"MessengerCreateCallConferenceResponsePayload",kind:"LinkedField",name:"messenger_create_call_conference",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"conference_name",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MessengerPrefixConferenceNameMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MessengerPrefixConferenceNameMutation",selections:b},params:{id:"2343115872389286",metadata:{},name:"MessengerPrefixConferenceNameMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("RTWebCallWindowInitializer",["regeneratorRuntime","URI","ZenonUserActionLogger"],(function(a,b,c,d,e,f){"use strict";var g;a=function(){function a(a,b){this.$1=b}var c=a.prototype;c.initCall=function(a,c){var d,e,f,h,i,j,k,l,m,n,o,p;return b("regeneratorRuntime").async(function(q){while(1)switch(q.prev=q.next){case 0:d=c.context,e=c.joinContext,f=c.mediaType,h=c.nonce;i={alohaEscalatedMW:!1};if(a){q.next=4;break}return q.abrupt("return",i);case 4:k=null;d.intent==="accept invite"?(n=d.controllerParams,k=n.callContext,l={controllerParams:n},j=n.callID,m=[]):(j=d.callID,d.existingCall?l={existingCall:d.existingCall}:l=null,m=d.invitees);o=function(a){b("ZenonUserActionLogger").logEvent({call_id:j,call_type:e.type==="thread"&&e.thread.type===1?"p2p":"mw",checkpoint:a,conference_name:(a=k)!=null?a:null,event:"checkpoint",is_caller:m.length>0,media_type:f})};if(!(e.type==="link")){q.next=11;break}q.t0=new(g||(g=b("URI")))(e.linkUrl);q.next=14;break;case 11:q.next=13;return b("regeneratorRuntime").awrap(this.$1.getCallUri({callID:j,context:l,invitees:m,mediaType:f,nonce:h,thread:e.thread}));case 13:q.t0=q.sent;case 14:p=q.t0;o(p.toString());o("load_popup");e.type==="thread"&&e.thread.type===1&&(p.getPath().includes("/groupcall/")&&(o("fetched_mw_url_for_aloha_interop"),i.alohaEscalatedMW=!0));this.__navigateToCallUri(p.toString(),a);return q.abrupt("return",i);case 20:case"end":return q.stop()}},null,this)};c.__navigateToCallUri=function(a,c){(g||(g=b("URI"))).goURIOnWindow(a,c,!0),c.focus()};return a}();e.exports=a}),null);
__d("MessengerMaybeCreateCallConferenceForP2PMutation",["Promise","requireCond","cr:1012418","MessengerMaybeCreateCallConferenceForP2PMutation.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("cr:1012418").commitMutation;b("cr:1012418").graphql;function a(a,c,d){return new(b("Promise"))(function(e){h(a,{mutation:g!==void 0?g:g=b("MessengerMaybeCreateCallConferenceForP2PMutation.graphql"),onCompleted:function(a){a=(a=a==null?void 0:(a=a.messenger_maybe_create_call_conference_for_p2p)==null?void 0:a.conference_name)!=null?a:null;return e(a)},optimisticUpdater:null,variables:{input:{audio_only:c==="audio",peer_id:d}}})})}}),null);
__d("MessengerPrefixConferenceNameMutation",["Promise","requireCond","cr:1012418","MessengerPrefixConferenceNameMutation.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("cr:1012418").commitMutation;b("cr:1012418").graphql;function a(a,c){return new(b("Promise"))(function(d,e){h(a,{mutation:g!==void 0?g:g=b("MessengerPrefixConferenceNameMutation.graphql"),onCompleted:function(a){a=(a=a==null?void 0:(a=a.messenger_create_call_conference)==null?void 0:a.conference_name)!=null?a:null;if(a!==null)return d(a);else return e(new Error("Conference name in undefined"))},optimisticUpdater:null,variables:{input:{thread_fbid:c}}})})}}),null);
__d("XVideoCallController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/videocall/incall/",{peer_id:{type:"FBID",required:!0},call_id:{type:"Int"},is_caller:{type:"Bool",defaultValue:!1},audio_only:{type:"Bool",defaultValue:!1},nonce:{type:"String"},meeting_id:{type:"Int"},meeting_pass:{type:"String"},initialize_video:{type:"Bool",defaultValue:!0},locale:{type:"String"}})}),null);
__d("ZenonUriBuilder",["regeneratorRuntime","FBLogger","MessengerMaybeCreateCallConferenceForP2PMutation","MessengerPrefixConferenceNameMutation","RTWebIncomingRingConfiguration","XGroupCallController","XVideoCallController","ZenonCallWindowErrors","ZenonSignalingTypes"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.__environment=a}var c=a.prototype;c.getCallUri=function(a){var c,d,e;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:d=null;f.t0=a.thread.type;f.next=f.t0===1?4:f.t0===2?21:25;break;case 4:if(!(a.context&&a.context.controllerParams)){f.next=8;break}a.context.controllerParams.configuration===b("ZenonSignalingTypes").ZenonSignalingProtocol.MW&&(d=a.context.controllerParams.callContext);f.next=11;break;case 8:f.next=10;return b("regeneratorRuntime").awrap(this.__maybeGetConferenceNameForP2PCall(a));case 10:d=f.sent;case 11:if(!(d!==null)){f.next=17;break}f.next=14;return b("regeneratorRuntime").awrap(this.__getUriForMultiwayCall(a,{conferenceName:d}));case 14:c=f.sent;f.next=20;break;case 17:f.next=19;return b("regeneratorRuntime").awrap(this.__getUriForP2PCall(a));case 19:c=f.sent;case 20:return f.abrupt("break",26);case 21:f.next=23;return b("regeneratorRuntime").awrap(this.__getUriForMultiwayCall(a));case 23:c=f.sent;return f.abrupt("break",26);case 25:throw new(b("ZenonCallWindowErrors").UnsupportedThreadTypeError)();case 26:e=new URLSearchParams(window.location.search);c.setString("locale",e.get("locale"));return f.abrupt("return",c.getURI());case 29:case"end":return f.stop()}},null,this)};c.__getUriForP2PCall=function(a){var c,d,e,f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:c=a.callID,d=a.invitees,e=a.mediaType,f=a.nonce,g=a.thread;return h.abrupt("return",b("XVideoCallController").getURIBuilder().setFBID("peer_id",g.id).setInt("call_id",c).setBool("is_caller",d.length>0).setBool("audio_only",e==="audio").setString("nonce",f).setBool("initialize_video",e==="video"));case 2:case"end":return h.stop()}},null,this)};c.__getUriForMultiwayCall=function(a,c){var d,e,f,g,h,i,j,k,l,m;return b("regeneratorRuntime").async(function(n){while(1)switch(n.prev=n.next){case 0:d=a.callID,e=a.context,f=a.invitees,g=a.mediaType,h=a.nonce,i=a.thread;c===void 0&&(c={});if(!(e&&e.controllerParams)){n.next=9;break}j=e.controllerParams.callContext;k=e.controllerParams.serverInfoData;if(!(j==null)){n.next=7;break}throw new(b("ZenonCallWindowErrors").IncompleteControllerParamsError)();case 7:n.next=31;break;case 9:k=e==null?void 0:(l=e.existingCall)==null?void 0:l.server_info_data;if(!(c.conferenceName!==void 0)){n.next=14;break}j=c.conferenceName;n.next=31;break;case 14:m=0;case 15:if(!(m<3)){n.next=29;break}n.prev=16;n.next=19;return b("regeneratorRuntime").awrap(b("MessengerPrefixConferenceNameMutation")(this.__environment.relayEnvironment,i.id));case 19:j=n.sent;return n.abrupt("break",29);case 23:n.prev=23,n.t0=n["catch"](16),b("FBLogger")("rtc_www").catching(n.t0).warn("Failed to fetch Messenger conference name for group call");case 26:m++;n.next=15;break;case 29:if(!(j==null)){n.next=31;break}throw new(b("ZenonCallWindowErrors").ConferenceNameMutationFailedError)();case 31:return n.abrupt("return",b("XGroupCallController").getURIBuilder().setString("call_context",j).setInt("call_id",d).setFBIDSet("users_to_ring",[].concat(f)).setBool("has_video",g==="video").setBool("initialize_video",g==="video").setString("server_info_data",k).setString("nonce",h));case 32:case"end":return n.stop()}},null,this,[[16,23]])};c.__maybeGetConferenceNameForP2PCall=function(a){var c,d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:c=a.mediaType,d=a.thread;if(b("RTWebIncomingRingConfiguration").isSupportedClientForProtocol(b("ZenonSignalingTypes").ZenonSignalingProtocol.MW)){e.next=3;break}return e.abrupt("return",null);case 3:e.prev=3;if(!(d==null)){e.next=6;break}return e.abrupt("return",null);case 6:e.next=8;return b("regeneratorRuntime").awrap(b("MessengerMaybeCreateCallConferenceForP2PMutation")(this.__environment.relayEnvironment,c,d.id));case 8:return e.abrupt("return",e.sent);case 11:e.prev=11;e.t0=e["catch"](3);b("FBLogger")("rtc_www").catching(e.t0).warn("Failed to fetch Messenger conference name for P2P call");return e.abrupt("return",null);case 15:case"end":return e.stop()}},null,this,[[3,11]])};return a}();e.exports=a}),null);
__d("RTWebMercuryCallWindowInitializer",["RTWebCallWindowInitializer","URI"],(function(a,b,c,d,e,f){"use strict";var g;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.__navigateToCallUri=function(a,c){typeof c.location==="string"?c.location=a.toString():(g||(g=b("URI"))).goURIOnWindow(a.toString(),c,!0),c.focus()};return c}(b("RTWebCallWindowInitializer"));e.exports=a}),null);